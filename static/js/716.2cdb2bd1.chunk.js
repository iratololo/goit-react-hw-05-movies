"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[716],{812:function(e,n,t){t.d(n,{Z:function(){return s}});var r="LoadMoreBtn_button__wacIM",a=t(184),s=function(e){var n=e.fn;return(0,a.jsx)("button",{className:r,type:"button",onClick:n,children:"Load more"})}},716:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(433),a=t(861),s=t(439),c=t(757),o=t.n(c),u=t(689),i=t(791),l=t(742),d=t(10),f=t(700),h=t(812),v="Review_item__8gQhI",_="Review_name__UP6hB",m="Review_text__V5p6q",p="Review_button__mFW71",x=t(184),w=function(e){var n=e.data,t=n.author,r=n.content,a=e.showModal;return(0,x.jsxs)("li",{className:v,children:[(0,x.jsx)("p",{className:_,children:t}),(0,x.jsx)("p",{className:m,children:r}),(0,x.jsx)("button",{onClick:function(){a({author:t,content:r})},type:"button",className:p,children:"See more"})]})},Z="Modal_modal__DJDMv",j="Modal_content__gGb69",k="Modal_name__d6D1e",b="Modal_text__KJZTz",g=function(e){var n=e.data,t=n.author,r=n.content,a=e.closeModal;return(0,i.useEffect)((function(){var e=function(e){"Escape"===e.code&&a()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[a]),(0,x.jsx)("div",{onClick:a,className:Z,children:(0,x.jsxs)("div",{className:j,children:[(0,x.jsx)("p",{className:k,children:t}),(0,x.jsx)("p",{className:b,children:r})]})})},M="Reviews_list__okdpy",N=t(472),S=function(){var e=(0,a.Z)(o().mark((function e(n){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.Z)("/movie/".concat(n,"/reviews"));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=(0,u.UO)().movieId,n=(0,i.useState)([]),t=(0,s.Z)(n,2),c=t[0],v=t[1],_=(0,i.useState)(0),m=(0,s.Z)(_,2),p=m[0],Z=m[1],j=(0,i.useState)(!1),k=(0,s.Z)(j,2),b=k[0],N=k[1],y=(0,i.useState)(!1),L=(0,s.Z)(y,2),C=L[0],E=L[1],R=(0,i.useState)(""),D=(0,s.Z)(R,2),I=D[0],B=D[1],F=(0,i.useState)(!1),J=(0,s.Z)(F,2),T=J[0],U=J[1],q=(0,i.useState)(!1),z=(0,s.Z)(q,2),G=z[0],K=z[1],O=(0,i.useState)(null),P=(0,s.Z)(O,2),Q=P[0],V=P[1],W=function(e){K(!0),V(e)};return(0,i.useEffect)((function(){N(!1);var n=5*p,t=n+5,s=function(){var s=(0,a.Z)(o().mark((function a(){var s,u;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l.Loading.circle(),B(""),a.next=5,S(e);case 5:if(s=a.sent,0!==(u=s.results).length){a.next=10;break}return U(!0),a.abrupt("return");case 10:c.length||v(u.slice(n,t)),b&&v((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(u.slice(n,t)))})),c.length>=u.length&&E(!0),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(0),console.log(a.t0.message),B(a.t0.message);case 19:return a.prev=19,l.Loading.remove(150),a.finish(19);case 22:case"end":return a.stop()}}),a,null,[[0,15,19,22]])})));return function(){return s.apply(this,arguments)}}();s()}),[e,c,p,b]),(0,x.jsxs)(x.Fragment,{children:[T&&(0,x.jsx)(d.Z,{children:"There is no reviews"}),I&&(0,x.jsx)(d.Z,{children:I}),!T&&(0,x.jsx)("div",{children:(0,x.jsxs)(f.Z,{children:[(0,x.jsx)("ul",{className:M,children:c.map((function(e){return(0,x.jsx)(w,{data:e,showModal:W},e.id)}))}),c.length>=5&&!C&&(0,x.jsx)(h.Z,{fn:function(){Z((function(e){return e+1})),N(!0)}})]})}),G&&(0,x.jsx)(g,{closeModal:function(){K(!1),V(null)},data:Q})]})}}}]);
//# sourceMappingURL=716.2cdb2bd1.chunk.js.map